<!DOCTYPE html>
<html>
<head>
  <title>Vault PW Mgr</title>
  <script src="https://unpkg.com/vue"></script>
  <style>
body {
  font-family: Menlo, Consolas, monospace;
  color: #444;
}
.group {
  cursor: pointer;
}
.bold {
  font-weight: bold;
}
ul {
  padding-left: 1em;
  line-height: 1.5em;
  list-style-type: none;
}

div.container {
  width: 100%;
  border: 1px solid gray;
}

img {
  vertical-align: middle;
}

nav {
  float: left;
  max-width: 40%;
  margin: 0;
  padding: 2px;
}

article {
  margin-left: 105px;
  border-left: 1px solid gray;
  padding: 2px;
  overflow: hidden;
}

label {
  display: inline-block;
  width: 6rem;
  text-align: right;
  vertical-align: middle;
}

label textarea {
  vertical-align: -50px;
}

input {
  padding: 2px;
  height: 16px;
  line-height: 14px;
  font-size: 14px;
}

header {
  padding: 3px;
  clear: left;
  text-align: left;
}

textarea {
margin-left: 6rem;
margin-top: -15px;
  padding: 2px;
}

  </style>
</head>
<body>
<!-- group template -->
<script type="text/x-template" id="group-template">
  <div>
    <div
      class="bold"
      @click="toggle">
      {{model.name}}
    </div>
    <ul v-show="open">
      <div v-for="entry in model.entries">
        <li @click="displayItem(model.name + entry)">{{entry}}</li>
      </div>
    </ul>
  </div>
</script>

<!-- Login template -->
<script type="text/x-template" id="login-template">
  <div>
    <h2>Login</h2>
<!--    <p v-if="$route.query.redirect">
      You need to login first.
    </p> -->
    <form @submit.prevent="login">
      <label>user ID:</label><input v-model="vaultid" placeholder="userID">
      <label>password:</label><input v-model="pass" placeholder="password" type="password">
      <button type="submit">login</button>
      <p v-if="error" class="error">Bad login information</p>
    </form>
  </div>
</script>

<script type="text/x-template" id="pwmgr-template">
  <div class="container" >
    <nav>
      <ul>
	<li v-for="item in groups">
	  <group
	    class="group"
	    :model="item">
	  </group>
	</li>
      </ul>
    </nav>
    <article id="entrydetails" >
      <form @submit.prevent="submit">
	<label>*Group:</label><input v-model="groupid" placeholder="group name"><br>
	<label>*Title:</label><input v-model="title" placeholder="title"><br>
	<label>URL:</label><input v-model="url" placeholder="url"><br>
	<label>Username:</label><input v-model="userid" placeholder="userIDx"><br>
	<label>Password:</label><input v-model="password" placeholder="password" :type="showPW ? '': 'password'"><img src="images/eye.png" v-on:click="showpass"></img><br>
	<label>Notes:</label><br><textarea cols="40" rows="5" v-model="notes" placeholder="notes"></textarea><br>
	Last update: {{changed}}<br>
	Last password change: {{pwChanged}}<br>
	<button v-on:click="clearfields">Clear fields</button>
	<button v-if="keystate() === 'update'" v-on:click="update">Update</button>
	<button v-if="keystate() === 'overwrite'" v-on:click="update">Overwrite existing!</button>
	<button v-if="keystate() === 'new'" v-on:click="addnew">Add New</button>
	<confirm @confirm="deleteentry" @cancel="cancel" text="Delete entry?">
	  <button v-if="isDeleteable()">Delete</button>
	</confirm>
	<br>
	<p class="error">{{error}}</p>
      </form>
    </article>
  </div>
</script>

<script type="text/x-template" id="app-template">
  <authentication v-if="(flow == 'auth')" v-on:auth-done="authComplete">
  </authentication>
  <pwmgr v-else :groups="pwgroups"> 
  </pwmgr>
</script>

<header>
  <p>Vault Password Manager</p>
</header>
<application id="demo"></application>

<script src="pwmgr.js"></script>
</body>
</html>

